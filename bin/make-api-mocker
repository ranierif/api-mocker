#!/usr/bin/env php
<?php

declare(strict_types=1);
$autoloadPaths = [
    __DIR__ . '/../vendor/autoload.php',
    __DIR__ . '/../../../autoload.php',
];
foreach ($autoloadPaths as $p) {
    if (file_exists($p)) {
        require $p;
        break;
    }
}

use Ranierif\Maker\ApiMockerMaker;

$providerName = $argv[1] ?? null;
if (! $providerName) {
    fwrite(STDERR, "Usage: vendor/bin/make-api-mocker <ProviderName>\n");
    exit(1);
}

try {
    (new ApiMockerMaker())->make($providerName);
    echo "âœ… ApiMocker for {$providerName} created successfully!\n";
} catch (Throwable $e) {
    fwrite(STDERR, "Error: {$e->getMessage()}\n");
    exit(1);
}
